{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\binel\\\\OneDrive\\\\Desktop\\\\iprofiler with React hooks\\\\src\\\\App.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { createGlobalState } from 'react-hooks-global-state';\nimport Navigation from './components/Navigation/Navigation';\nimport Login from './components/Login/Login';\nimport Register from './components/Register/Register';\nimport Logo from './components/Logo/Logo';\nimport ImageLinkForm from './components/ImageLinkForm/ImageLinkForm';\nimport Rank from './components/Rank/Rank';\nimport FaceRecognition from './components/FaceRecognition/FaceRecognition';\nimport './App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst initialState = {\n  input: '',\n  box: [],\n  route: 'login',\n  user: {\n    id: '',\n    name: '',\n    email: '',\n    entries: 0,\n    joined: ''\n  }\n};\nconst {\n  useGlobalState\n} = createGlobalState(initialState); // class App extends Component {\n//   constructor() {\n//     super();\n//     this.state = initialState;\n//   }\n\nfunction App() {\n  _s();\n\n  const [input, setInput] = useGlobalState();\n  const [box, setBoxes] = useGlobalState(initialState.box);\n  const [route, setRoute] = useGlobalState(initialState.route);\n  const [user, setUser] = useGlobalState(initialState.user);\n\n  const loadUser = data => {\n    setUser({\n      id: data.id,\n      name: data.name,\n      email: data.email,\n      entries: data.entries,\n      joined: data.joined\n    });\n  };\n\n  const calculateFaceLocation = data => {\n    const faces = [];\n    const image = document.getElementById(\"inputimage\");\n    const width = Number(image.width);\n    const height = Number(image.height);\n\n    for (let i = 0; i < data.outputs[0].data.regions.length; i++) {\n      const clarifaiFace = data.outputs[0].data.regions[i].region_info.bounding_box;\n      faces.push({\n        leftCol: clarifaiFace.left_col * width,\n        topRow: clarifaiFace.top_row * height,\n        rightCol: width - clarifaiFace.right_col * width,\n        bottomRow: height - clarifaiFace.bottom_row * height\n      });\n    }\n\n    return faces;\n  }; // const displayFaceBox = (box) => {\n  //   setBoxes(box); \n  // };\n  //input property of the app\n\n\n  const onInputChange = event => {\n    setInput(event.target.value);\n  };\n\n  const onButtonSubmit = () => {\n    fetch('https://fast-ravine-77412.herokuapp.com/imageurl/', {\n      method: 'post',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        input: input\n      })\n    }).then(response => response.json()).then(response => {\n      if (response) {\n        fetch('https://fast-ravine-77412.herokuapp.com/image', {\n          method: 'put',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            id: user.id\n          })\n        }).then(response => response.json()).then(count => {\n          setUser(Object.assign({ ...user,\n            entries: count\n          }));\n        });\n      }\n\n      setBoxes(calculateFaceLocation(response));\n    }).catch(error => console.log(\"error\", error));\n  };\n\n  const onRouteChange = route => {\n    if (route === 'logout') {\n      setRoute(initialState);\n    } else {\n      setRoute(route);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: route === 'home' ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Navigation, {\n        onRouteChange: onRouteChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Logo, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Rank, {\n        name: user.name,\n        entries: user.entries\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(ImageLinkForm, {\n        onInputChange: onInputChange,\n        onButtonSubmit: onButtonSubmit\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(FaceRecognition, {\n        box: box,\n        imageUrl: input\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 11\n    }, this) : route === 'login' ? /*#__PURE__*/_jsxDEV(Login, {\n      loadUser: loadUser,\n      onRouteChange: onRouteChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 13\n    }, this) : /*#__PURE__*/_jsxDEV(Register, {\n      loadUser: loadUser,\n      onRouteChange: onRouteChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 115,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"2pk2Qa6h9wDmzX8eS1oEdSkF5H8=\", false, function () {\n  return [useGlobalState, useGlobalState, useGlobalState, useGlobalState];\n});\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","createGlobalState","Navigation","Login","Register","Logo","ImageLinkForm","Rank","FaceRecognition","initialState","input","box","route","user","id","name","email","entries","joined","useGlobalState","App","setInput","setBoxes","setRoute","setUser","loadUser","data","calculateFaceLocation","faces","image","document","getElementById","width","Number","height","i","outputs","regions","length","clarifaiFace","region_info","bounding_box","push","leftCol","left_col","topRow","top_row","rightCol","right_col","bottomRow","bottom_row","onInputChange","event","target","value","onButtonSubmit","fetch","method","headers","body","JSON","stringify","then","response","json","count","Object","assign","catch","error","console","log","onRouteChange"],"sources":["C:/Users/binel/OneDrive/Desktop/iprofiler with React hooks/src/App.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { createGlobalState } from 'react-hooks-global-state';\nimport Navigation from './components/Navigation/Navigation';\nimport Login from './components/Login/Login';\nimport Register from './components/Register/Register';\nimport Logo from './components/Logo/Logo';\nimport ImageLinkForm from './components/ImageLinkForm/ImageLinkForm';\nimport Rank from './components/Rank/Rank';\nimport FaceRecognition from './components/FaceRecognition/FaceRecognition';\nimport './App.css';\n\n\n\n\nconst initialState = {\n  input: '',\n  box: [],\n  route: 'login',\n  user: {\n    id: '',\n    name: '',\n    email: '',\n    entries: 0,\n    joined: ''\n  }\n};\nconst { useGlobalState } = createGlobalState(initialState);\n\n// class App extends Component {\n//   constructor() {\n//     super();\n//     this.state = initialState;\n//   }\nfunction App() {\n  const [input, setInput] = useGlobalState();\n  const [box, setBoxes] = useGlobalState(initialState.box);\n  const [route, setRoute] = useGlobalState(initialState.route);\n  const [user, setUser] = useGlobalState(initialState.user);\n\n\n  const loadUser = (data) => {\n    setUser({\n      id: data.id,\n      name: data.name,\n      email: data.email,\n      entries: data.entries,\n      joined: data.joined\n    })\n  };\n\n  const calculateFaceLocation = (data) => {\n    const faces = [];\n    const image = document.getElementById(\"inputimage\");\n    const width = Number(image.width);\n    const height = Number(image.height);\n    for (let i = 0; i < data.outputs[0].data.regions.length; i++) {\n    const clarifaiFace = data.outputs[0].data.regions[i].region_info.bounding_box;\n    faces.push({\n      leftCol: clarifaiFace.left_col * width,\n      topRow: clarifaiFace.top_row * height,\n      rightCol: width - (clarifaiFace.right_col * width),\n      bottomRow: height - (clarifaiFace.bottom_row * height)\n    });\n  }\n  return faces;\n};\n\n  // const displayFaceBox = (box) => {\n  //   setBoxes(box); \n  // };\n\n  //input property of the app\n  const onInputChange = (event) => {\n    setInput(event.target.value);\n  };\n\n  const onButtonSubmit = () => {\n    fetch('https://fast-ravine-77412.herokuapp.com/imageurl/', {\n      method: 'post',\n      headers: {'Content-Type': 'application/json'},\n      body: JSON.stringify({\n        input: input\n      })\n    })\n    \n    .then(response => response.json())\n    .then(response => {\n      if (response) {\n        fetch('https://fast-ravine-77412.herokuapp.com/image', {\n          method: 'put',\n          headers: {'Content-Type': 'application/json'},\n          body: JSON.stringify({\n            id: user.id\n          })\n        })\n        .then(response =>  response.json())\n        .then(count => {\n          setUser(Object.assign({...user, entries: count}));\n        });\n      }\n      setBoxes(calculateFaceLocation(response));\n    })\n    .catch(error => console.log(\"error\", error));\n  };\n\n  const onRouteChange = (route) => {\n    if (route === 'logout') {\n      setRoute(initialState);\n    } else {\n      setRoute(route);\n    }\n  };\n\n  return (\n    <div className=\"App\">\n      { route === 'home' \n        ? <div>\n            <Navigation onRouteChange={onRouteChange}/>\n            <Logo />\n            <Rank \n            name={user.name} \n            entries={user.entries} />\n            <ImageLinkForm \n            onInputChange = {onInputChange}\n            onButtonSubmit = {onButtonSubmit}/>\n            <FaceRecognition \n            box= {box} \n            imageUrl = {input}/>\n          </div>\n        : (\n          route === 'login'\n          ? <Login loadUser={loadUser} onRouteChange={onRouteChange}/>\n          : <Register loadUser={loadUser} onRouteChange={onRouteChange}/>\n        )\n      }\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}